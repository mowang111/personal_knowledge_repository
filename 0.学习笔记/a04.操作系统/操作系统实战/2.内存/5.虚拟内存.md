## x86 CPU虚拟地址空间划分
![[x86虚拟地址划分.png]]

## Cosmos划分虚拟地址空间
![[内核空间与应用空间.png]]
## 虚拟地址数据结构
```plantuml
struct kmvarsdsc_t {
    - kva_lock : spinlock_t
    - kva_maptype : u32_t
    - kva_list : list_h_t
    - kva_flgs : u64_t
    - kva_limits : u64_t
    - kva_mcstruct : void*
    - kva_start : adr_t
    - kva_end : adr_t
    - kva_kvmbox : kvmemcbox_t*
    - kva_kvmcobj : void*
}

struct virmemadrs_t {
    spinlock_t vs_lock
    u32_t  vs_resalin
    list_h_t vs_list
    uint_t vs_flgs
    uint_t vs_kmvdscnr
    mmadrsdsc_t* vs_mm
    kmvarsdsc_t* vs_startkmvdsc
    kmvarsdsc_t* vs_endkmvdsc
    kmvarsdsc_t* vs_currkmvdsc
    adr_t vs_isalcstart
    adr_t vs_isalcend
    void* vs_privte
    void* vs_ext
}
```
