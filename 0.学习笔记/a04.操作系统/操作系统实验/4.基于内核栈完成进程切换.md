Linux0.11 的进程切换依靠tss(task state segment 任务状态段)完成的

```c
/*
168  *  switch_to(n) should switch tasks to task nr n, first
169  * checking that n isn't the current task, in which case it does nothin    g.
170  * This also clears the TS-flag if the task we switched to has used
171  * tha math co-processor latest.
172  */
/*
	%0 指向__tmp                      %1 指向__tmp.b,用于存放新TSS的选择符_TSS(n)
	dx 新任务n的TSS段选择符            ecx 新任务n的任务结构指针task[n]
	其中临时数据结构__tmp用于组建179行远跳转指令的操作数
*/
173 #define switch_to(n) {\
174 struct {long a,b;} __tmp; \
175 __asm__("cmpl %%ecx,current\n\t" \//判断任务n是否为当前任务
176   "je 1f\n\t" \
177   "movw %%dx,%1\n\t" \ //新任务TSS的16位选择符存入__tmp.b
178   "xchgl %%ecx,current\n\t" \ //current=task[n](任务结构指针)
179   "ljmp *%0\n\t" \   //执行长跳转至*&__tmp,z
180   "cmpl %%ecx,last_task_used_math\n\t" \
181   "jne 1f\n\t" \
182   "clts\n" \
183   "1:" \
184   ::"m" (*&__tmp.a),"m" (*&__tmp.b), \
185   "d" (_TSS(n)),"c" ((long) task[n])); \
186 }
```

