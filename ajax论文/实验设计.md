过程

![浏览器界面](https://raw.githubusercontent.com/mowang111/image-hosting/master/typora_images/%E6%B5%8F%E8%A7%88%E5%99%A8%E7%95%8C%E9%9D%A2.png)





基本指令集

![image-20220118191426660](https://raw.githubusercontent.com/mowang111/image-hosting/master/typora_images/image-20220118191426660.png)

## ajax引擎

### html分析引擎

https://github.com/google/gumbo-parser

提取出标签，标签内容，

### 串口屏显示引擎



## 实验过程

1. 首先请求数据 http://116.62.45.53/

2. 对后台发送的html文件进行解析([使用gumbo解析HTML](https://www.cnblogs.com/fnlingnzb-learner/p/5835415.html))

   https://www.cnblogs.com/fnlingnzb-learner/p/5835415.html

   ```html
   <head>
       <meta content="text/html; charset=ISO-8859-1" Http-equiv="content-type">
       <script type="application/javascript">
       function loadJSON()
       {
           var data_file = "./data.json";
           var http_request = new XMLHttpRequest();
           try{
               // Opera 8.0+, Firefox, chrome, Safari
               http_request = new XMLHttpRequest();
           }catch (e){
               try{
                   http_request = new ActiveXObject("Msxml2.XMLHTTP");
               }catch (e) {
                   try{
                       http_request = new ActiveXObject("Microsoft.XMLHTTP");
                   }catch (e){
                       alert("Your browser broke!");
                       return false;
                   }
               }
           }
           http_request.onreadystatechange = function(){
               if (http_request.readyState == 4 )
               {
                   var jsonObj = JSON.parse(http_request.responseText);
                   document.getElementById("Name").innerHTML = jsonObj.name;
                   document.getElementById("Data").innerHTML = jsonObj.data;
               }
           }
           http_request.open("GET", data_file, true);
           http_request.send();
       }
       </script>
       <title>ajax test</title>
       </head>
       <body>
       <h1>Ajax Test</h1>
       <table class="src">
       <tr><th>Name</th><th>Data</th></tr>
       <tr><td><div id="Name">wireSpeed</div></td>
       <td><div id="Data">11223344</div></td></tr>
       </table>
       <div class="central">
       <button type="button" onclick="loadJSON()">Update Details </button>
       </body>
       </html>
   ```

3. 将解析出了table转成串口数据

## 实验想法

https://www.runoob.com/try/try.php?filename=tryajax_first

```html
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<script>
function loadXMLDoc()
{
	var xmlhttp;
	if (window.XMLHttpRequest)
	{
		//  IE7+, Firefox, Chrome, Opera, Safari 浏览器执行代码
		xmlhttp=new XMLHttpRequest();
	}
	else
	{
		// IE6, IE5 浏览器执行代码
		xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
	}
	xmlhttp.onreadystatechange=function()
	{
		if (xmlhttp.readyState==4 && xmlhttp.status==200)
		{
			document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
		}
	}
	xmlhttp.open("GET","/try/ajax/ajax_info.txt",true);
	xmlhttp.send();
}
</script>
</head>
<body>

<div id="myDiv"><h2>使用 AJAX 修改该文本内容</h2></div>
<button type="button" onclick="loadXMLDoc()">修改内容</button>

</body>
</html>
```

问题

1. 既然要基于原有mes系统开发，就要知道传统mes服务器传回数据的具体过程？

   假设传回了一个含有一张表单的html文件，就需要处理这个html文件，然后在串口屏上渲染，

   然后获取表单中的数据？->这一步

   
