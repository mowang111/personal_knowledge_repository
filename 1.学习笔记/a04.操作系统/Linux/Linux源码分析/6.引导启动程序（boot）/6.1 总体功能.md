![[从系统加电起所执行程序的顺序.png]]

## BIOS
![[从BIOS到GRUB.png]]
+ BIOS之后，启动引导时内核在内存中的位置和移动后的位置情况
![[启动引导时内核在内存中的位置和移动后的位置情况.png]]
## bootsect.s
1. 将自己移动到0x90000开始处并继续执行——给system模块腾位置
2. 加载setup模块（0x90200）和system模块（0x10000）到指定位置
3. 确定根文件系统的设备号
4. 执行setup程序
## seup.s
1. 读取机器系统数据，保留到0x90000处
2. 将system模块从0x10000-0x8ffff移动到0x00000处
> 为什么不在bootsect.s时就直接将system模块移动到0x00000处？
> setup代码开始部分还要调用BIOS提供的中断来获取机器参数，BIOS的中断向量表放置于0x00000处，0x400字节
3. 加载中断描述符表寄存器（idtr）和全局描述符表寄存器（gdtr），开启A20地址线，重新设置两个中断控制芯片8259A，将硬件中断号重新设置为0x20-0x2f，设置CPU的控制寄存器CR0（机器状态字），进入32位保护模式
>上述步骤看着很繁琐，归根结底是为了确保系统正确进入保护模式[[x86 CPU程序执行的三种模式#切换到保护模式]]
5. 跳转到system模块最前面的head.s程序

## head.s
> 采用AT&T的汇编语言格式
1. 

## main.s
