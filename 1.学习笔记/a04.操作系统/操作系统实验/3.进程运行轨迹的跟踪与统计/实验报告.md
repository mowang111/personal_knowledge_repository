就绪与运行之间的状态转移（记住是两者之间的相互状态转移）是通过 `schedule（）`函数完成的；运行到阻塞的转移依靠的是 `sleep-on（）`和 `interruptible _sleep_on()`，进程通过系统调用 `sys-pause（）`和 `sys-waitpid（）` 可以主动进入阻塞态；阻塞到就绪的转移依靠的是 `wake_up（）`。所以只要在这些函数的适当位置插人适当的处理语句就能完成进程运行轨迹的全面跟踪了。

自定义打印日志的函数
```c
static char logbuf[1024];
int fprintk(int fd, const char *fmt, ...)
{
	va_list args;
	int count;
	va_start(args, fmt);
	count = vsprintf(logbuf, fmt, args);
	va_end(args);
	if (fd == 3) count = sys_write(fd, logbuf, count);
	return count;
}
```
> 可变参数使用和原理：[[可变参数]]




```

```

