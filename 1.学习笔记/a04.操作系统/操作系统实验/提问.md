问题：as86汇编语法，寄存器寻址报错
背景：最近正在做哈工大那门操作系统实验项目，修改linux0.11中setup.s的代码时，使用`mov bp, [bx+si]`类似的语法，但是编译总是报错![[registerusedasidentifier.png]]
尝试过`mov bp, [ebx+esi]`, `mov bp, [bx]`, `mov bp, ds:[bx]`均报错
主机版本：ubuntu 22.04.4
编译器版本：as86 0.16.17


问题：c语言，函数参数值传递错误
背景：最近正在学习linux0.11源码，并加以调试，在实验中，需要在进程退出时打印进程消息，于是在`/kernel/printk.c`中添加frpintk函数，如下所示：
```c
// static char logbuf[1024];
int fprintk(int fd)
{
	printk("--------------------------------------\n");
	printk("fprintk called with fd: %d\n", fd);  // 调试信息
	// va_list args;
	// int count;
	// va_start(args, fmt);
	// count = vsprintf(logbuf, fmt, args);
	// va_end(args);
	// printk("fprintk: formatted string: %s\n", logbuf);  // 调试信息
	// if (fd == 3) {
	// 	count = sys_write(fd, logbuf, count);
	// 	printk("fprintk: written %d bytes to fd %d\n", count, fd);  // 调试信息
	// }
	printk("--------------------------------------\n");
	// return count;
	return 0;
}
```
接着在`/kernel/exit.c`的`do_exit()`函数中添加该函数调用：
```c
int fd = 3;
......
printk("exit fd: %d\n", fd);
// fprintk(fd, "%ld\t%c\t%ld\n", current->pid, 'E', jiffies);
fprintk(fd);
...
```
实际实验中，发现打印出来的fd不是3，而是一个很奇怪的值，就不知道是为什么。
![[Pasted image 20240528073327.png]]